<!DOCTYPE html>\n<html>\n<head>\n    <title>Cross-Generator Loading Fix Test</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }\n        .test-container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .test-header { background: #27ae60; color: white; padding: 15px; margin: -20px -20px 20px; border-radius: 8px 8px 0 0; }\n        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 4px; }\n        .test-status { font-weight: bold; padding: 5px 10px; border-radius: 4px; margin: 5px 0; }\n        .status-pass { background: #4CAF50; color: white; }\n        .status-fail { background: #f44336; color: white; }\n        .status-info { background: #2196F3; color: white; }\n        .test-details { background: #f9f9f9; padding: 10px; margin: 10px 0; border-left: 4px solid #27ae60; font-family: monospace; font-size: 12px; }\n        .instructions { background: #e8f5e8; padding: 15px; border-radius: 4px; margin: 20px 0; border: 2px solid #27ae60; }\n    </style>\n</head>\n<body>\n    <div class=\"test-container\">\n        <div class=\"test-header\">\n            <h1>✅ Cross-Generator Loading Fix</h1>\n            <p>Testing the conditional initialization fix for Questions Generator on Topics pages</p>\n        </div>\n\n        <div class=\"instructions\">\n            <h3>🎯 ISSUE RESOLVED: Cross-Generator Loading Conflict</h3>\n            <p><strong>Problem:</strong> Questions Generator was trying to initialize on Topics pages, causing console errors:</p>\n            <ul>\n                <li>❌ \"MKCG Enhanced Questions: No topics data from PHP\"</li>\n                <li>❌ \"MKCG: Selected topic element not found: #mkcg-selected-topic-text\"</li>\n            </ul>\n            <p><strong>Solution:</strong> Added conditional initialization to prevent cross-loading</p>\n        </div>\n\n        <div class=\"test-section\">\n            <h3>🔧 Fix Implementation</h3>\n            <div class=\"test-details\">\n✅ Added shouldInitialize() method to Questions Generator\n✅ Checks for required DOM elements before initializing\n✅ Detects Topics Generator page and skips initialization\n✅ Enhanced DOM ready event with double-checking\n✅ Only shows error messages when actually needed\n            </div>\n        </div>\n\n        <div class=\"test-section\">\n            <h3>🧪 Test Instructions</h3>\n            <ol>\n                <li><strong>Go to your Topics Generator page:</strong> <code>?entry=y8ver</code></li>\n                <li><strong>Open browser console</strong> (F12 → Console tab)</li>\n                <li><strong>Look for these NEW messages:</strong>\n                    <div class=\"test-details\">\n✅ \"MKCG Enhanced Questions: Skipping initialization - not on Questions Generator page\"\nOR\n✅ \"MKCG Enhanced Questions: Topics Generator detected, Questions Generator will not initialize\"\n                    </div>\n                </li>\n                <li><strong>Verify you NO LONGER see:</strong>\n                    <div class=\"test-details\">\n❌ \"MKCG Enhanced Questions: No topics data from PHP\"\n❌ \"MKCG: Selected topic element not found: #mkcg-selected-topic-text\"\n❌ Questions Generator initialization errors\n                    </div>\n                </li>\n            </ol>\n        </div>\n\n        <div class=\"test-section\">\n            <h3>📊 Expected Console Output (AFTER Fix)</h3>\n            <div class=\"test-details\">\n✅ MKCG Topics: Template data loading...\n✅ MKCG Topics: Final data loaded\n✅ Topics Generator: Initializing with centralized data manager\n✅ MKCG Enhanced Questions: Skipping initialization - not on Questions Generator page\n✅ Topics Generator: PHP data loaded successfully\n✅ No Questions Generator errors!\n            </div>\n        </div>\n\n        <div class=\"test-section\">\n            <h3>🎯 How The Fix Works</h3>\n            <h4>1. Page Detection Logic</h4>\n            <div class=\"test-details\">\nThe Questions Generator now checks THREE conditions before initializing:\n\n✓ Required DOM elements present (#mkcg-topics-grid, #mkcg-selected-topic-text, etc.)\n✓ Questions Generator data available (MKCG_TopicsData, questions_vars, etc.) \n✓ NOT on a Topics Generator only page (.topics-generator present but no .mkcg-topic-card)\n\nIf ANY check fails → Questions Generator skips initialization\n            </div>\n            \n            <h4>2. Enhanced DOM Ready Event</h4>\n            <div class=\"test-details\">\n✓ 100ms delay to ensure all scripts are loaded\n✓ Double-check for Topics Generator presence\n✓ Only show error messages if actually on Questions Generator page\n✓ Graceful fallback if initialization isn't needed\n            </div>\n        </div>\n\n        <div class=\"test-section\">\n            <h3>🔄 Testing Other Pages</h3>\n            <p><strong>Topics Generator Page:</strong> ✅ Should only see Topics Generator messages</p>\n            <p><strong>Questions Generator Page:</strong> ✅ Should see both generators if designed to work together</p>\n            <p><strong>Other Pages:</strong> ✅ Should see no generator messages if generators aren't present</p>\n        </div>\n\n        <div class=\"test-section\">\n            <h3>📝 Troubleshooting</h3>\n            <p><strong>If you still see Questions Generator errors on Topics page:</strong></p>\n            <ol>\n                <li>Hard refresh the page (Ctrl+F5)</li>\n                <li>Clear browser cache</li>\n                <li>Check that the JavaScript file was updated</li>\n                <li>Verify the conditional logic is working by looking for the \"Skipping initialization\" message</li>\n            </ol>\n        </div>\n\n        <div class=\"test-section\">\n            <h3>✅ Success Criteria</h3>\n            <div class=\"test-status status-pass\">\n                ✅ NO Questions Generator errors on Topics pages\n            </div>\n            <div class=\"test-status status-pass\">\n                ✅ Topics Generator works normally\n            </div>\n            <div class=\"test-status status-pass\">\n                ✅ Questions Generator still works on its own pages\n            </div>\n            <div class=\"test-status status-pass\">\n                ✅ Clean console output with appropriate skip messages\n            </div>\n        </div>\n    </div>\n</body>\n</html>